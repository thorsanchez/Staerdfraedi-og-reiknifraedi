# -*- coding: utf-8 -*-
"""S10.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/19S24FkSJukSD-dIoWL3k7GZIh3O57y2x

S10 (38-CD, VV3, VV6-A)
***

C. KennitÃ¶lur og vartÃ¶luprÃ³fun

SkrifiÃ° fall sem Ã¡kvarÃ°ar hvort kennitala sem gefin er meÃ° 10 stafa streng (Ã¡n bandstriks) sÃ© meÃ° rÃ©tta vartÃ¶lu og skilar svarinu sem rÃ¶kgildi (True eÃ°a False). PrÃ³fiÃ° meÃ° "9999999999" og lÃ­ka meÃ° eigin kennitÃ¶lu.
***
"""

def has_valid_serial_number(ssn):
    # kikjum ef input er 10 tala strengur
    if len(ssn) != 10 or not ssn.isdigit():
        return False

    # reiknum Ãºt vartÃ¶luna
    serial = sum([int(ssn[i]) * [3, 2, 7, 6, 5, 4, 3, 2][i] for i in range(8)])
    serial = 11 - (serial % 11) if serial % 11 != 0 else 0

    return serial == int(ssn[9])
print(has_valid_serial_number("9999999999"))    # False
print(has_valid_serial_number("0402013748"))    # True

"""Ã skrÃ¡nni https://cs.hi.is/python/kennitolur.txt eru skÃ¡ldaÃ°ar upplÃ½singar um 15 prÃ³ftaka, prÃ³fnÃºmer, kennitÃ¶lur og nÃ¶fn. LesiÃ° skrÃ¡na inn Ã­ Ã¾rjÃ¡ lista meÃ° Ã¾vÃ­ aÃ° nota np.loadtxt(...) og birtiÃ° tÃ¶flu meÃ° innihaldinu.
***
"""

import numpy as np

url = "https://cs.hi.is/python/kennitolur.txt"
names, exam_numbers, ssn = np.loadtxt(url, delimiter=",", dtype=str, unpack=True)

import pandas as pd

df = pd.DataFrame({
    "Nafn": names,
    "PrÃ³fnÃºmer": exam_numbers,
    "Kennitala": ssn
})
print(df)

"""VartÃ¶luprÃ³fiÃ° kennitÃ¶lurnar (Ã­ for-lykkju). Ein Ã¾eirra stenst ekki prÃ³fun. HvaÃ°a nemandi Ã¡ hana?
***
"""

import urllib.request

def has_valid_serial_number(ssn):
    if len(ssn) != 10 or not ssn.isdigit():
        return False

    serial = sum([int(ssn[i]) * [3, 2, 7, 6, 5, 4, 3, 2][i] for i in range(8)])
    serial = 11 - (serial % 11) if serial % 11 != 0 else 0

    return serial == int(ssn[9])

url = "https://cs.hi.is/python/kennitolur.txt"

response = urllib.request.urlopen(url)
data = response.read().decode()

lines = data.strip().split("\n")

for line in lines:
    name, exam_number, ssn = line.strip().split(",")
    if not has_valid_serial_number(ssn):
        print("Nemandi sem stenst ekki prÃ³fun er:", name)
        break

"""SkrifiÃ° fall sem tekur viÃ° kennitÃ¶lu og skilar tilsvarandi fÃ¦Ã°ingardegi meÃ° sniÃ°i: â€17. Ã¡gÃºst 1958â€œ. PrÃ³fiÃ° meÃ° eigin kennitÃ¶lu, og lÃ­ka kennitÃ¶lu einhvers Ã­ skrÃ¡nni sem fÃ¦ddur er Ã¡ annari Ã¶ld.
***
"""

import datetime

def get_dob_from_ssn(ssn):
    day = int(ssn[:2])
    month = int(ssn[2:4])
    year = int(ssn[4:6])
    if year >= 36:
        year += 1900
    else:
        year += 2000
    dob = datetime.date(year, month, day)
    return dob.strftime("%d. %B %Y")
print(get_dob_from_ssn("0301012520"))
print(get_dob_from_ssn("2605973109"))

"""D. UppflettitÃ¶flur
LesiÃ° skrÃ¡na sem notuÃ°u var Ã­ dÃ¦mi C inn Ã­ Ã¾rjÃ¡ lista eins og gert var Ã¾ar.

BÃºiÃ° til uppflettitÃ¶flu (dictionary) til aÃ° fletta upp Ã¡ prÃ³fnÃºmeri Ãºt frÃ¡ nafni (nafn er lykill og prÃ³fnÃºmer er gildi).
***
"""

import urllib.request

url = "https://cs.hi.is/python/kennitolur.txt"
data = urllib.request.urlopen(url)

exam_numbers = {}

for line in data:
    line = line.decode("utf-8").strip()
    name, exam_number, kennitala = line.split(",")
    exam_numbers[name] = exam_number

print(exam_numbers)

"""SkrifiÃ° forrit sem skrifar Ãºt lista (meÃ° haus) yfir nÃ¶fn og prÃ³fnÃºmer Ã­ Ã­slenskri stafrÃ³fsrÃ¶Ã°.
***
"""

import numpy as np
import urllib.request

def Ã­slenska(s):
   # notaÃ° sem 'key' Ã­ sort eÃ°a sorted til aÃ° raÃ°a Ã­ Ã­slenska stafrÃ³fsrÃ¶Ã°,
   # t.d. print(sorted(['Ã¡r','bÃ¡ra','bali','akur'], key=Ã­slenska))"""
   return [Ã­slenska.k.get(c.lower(),0) for c in s]
Ã­slenska.a = list('aÃ¡bcdÃ°eÃ©fghiÃ­jklmnoÃ³pqrstuÃºvwxyÃ½zÃ¾Ã¦Ã¶')
Ã­slenska.k = dict(zip(Ã­slenska.a, range(1,len(Ã­slenska.a)+1)))

url = "https://cs.hi.is/python/kennitolur.txt"
with urllib.request.urlopen(url) as f:
    data = np.loadtxt(f, dtype=str, delimiter=',', skiprows=1)

sorted_data = sorted(data, key=lambda x: islenska(x[0]))

print("Nafn\t\t\tProf Numer")
for name, number, _ in sorted_data:
    print(f"{name.ljust(25)}{number}")

"""HÃ©r er listi yfir prÃ­mtÃ¶lur nÃºmer 1 til 25:

***
"""

P = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97]

nrp = {}
for i, prime in enumerate(P):
    nrp[prime] = i+1

def lookup(number, nrp):
    if number > 99:
        print(f"{number} er of stor")
    elif number in nrp:
        print(f"{number} er {nrp[number]} primtalan")
    else:
        print(f"{number} er ekki primtala")

lookup(13, nrp)
lookup(16, nrp)
lookup(103, nrp)

"""Verkefni Ãºr VÃ¶ldum efnum um stÃ¦rÃ°frÃ¦Ã°i og reiknifrÃ¦Ã°i (https://cs.hi.is/strei Links to an external site.)

VV3 (Fall Rosenbrocks)
***

SkrifiÃ° fall rosen(x,y) til aÃ° reikna gildi fallsins. PrÃ³fiÃ° aÃ° reikna ğ‘“(âˆ’1.2,1) sem Ã¦tti aÃ° gefa 24.2.
***
"""

def rosen(x, y):
    return (1 - x)**2 + 100*(y - x**2)**2
rosen(-1.2, 1)

"""TeikniÃ° hÃ¦Ã°arlÃ­numynd af Rosenbrock-fallinu meÃ° plt.contour Ã¡ svÃ¦Ã°inu [âˆ’2,2]Ã—[âˆ’1,3]. LÃ¡tiÃ° hÃ¦Ã°arlÃ­nurnar vera dÃ¶kkblÃ¡ar, merkiÃ° Ã¾Ã¦r lÃ­kt og gert er Ã­ sÃ½nidÃ¦minu HÃ¦Ã°arlÃ­nur falls Ã­ kafla A1, og hafiÃ° netlÃ­nur (grid) meÃ°. Til aÃ° fÃ¡ gÃ³Ã°a mynd Ã¾arf bÃ¦Ã°i aÃ° reikna falliÃ° Ã¡ Ã¾Ã©ttu neti (t.d. 300Ã—300) og velja hÃ¦Ã°arlÃ­nugildin, sem fÃ¡st meÃ° stikanum levels vel. Gildin 0.2,22,62,102,â€¦,462 gefa t.d. Ã¡gÃ¦ta mynd.
***
"""

import numpy as np
import matplotlib.pyplot as plt

def rosen(x, y):
    return (1 - x)**2 + 100*(y - x**2)**2

x = np.linspace(-2, 2, 300)
y = np.linspace(-1, 3, 300)

X, Y = np.meshgrid(x, y)

Z = rosen(X, Y)

levels = np.append([0.2], np.arange(2,50,4)**2)

plt.contour(X, Y, Z, levels=levels, colors='navy')

plt.grid()
plt.xlabel('x')
plt.ylabel('y')
plt.title("hÃ¦Ã°arlÃ­numynd af Rosenbrock-fallinu ")

plt.show()

"""VV6A (Stiglar og lÃ¡gmÃ¶rkun)
***

ÃkvarÃ°iÃ° stigul ğ‘“(Ã¾.e.a.s. âˆ‡ğ‘“), skrifiÃ° Python-fall sem finnur hann og notiÃ° Ã¾aÃ° til aÃ° reikna âˆ‡ğ‘“(ğ‘)
***
"""

def gf(x, y):
    return (2*x*y + 2*y**2 - 3*y, x**2 + 4*x*y - 3*x)
p = (1, 1)
gf(*p)

"""LÃ¡t ğ‘¢=(âˆ’1,âˆ’1). NotiÃ° Python-falliÃ° Ãºr a-liÃ° lÃ­ka til aÃ° reikna stefnuafleiÃ°u ğ‘“ Ã­ stefnu ğ‘¢ Ã­ punktinum ğ‘. BÃºiÃ° lÃ­ka til einhvern punkt og vigur Ãºr afmÃ¦lisdegi ykkar og reikniÃ° tilsvarandi stefnuafleiÃ°u.
***
"""

import numpy as np

def f(x, y):
    return x**2*y + 2*x*y**2 - 3*x*y + 4

p = (1, 1)

u = np.array([-1, -1]) / np.sqrt(2)

dfdu = np.dot(gf(*p), u)

print("StefnuafleiÃ°a f Ã­ stefnu u Ã­ punktinum p:", dfdu)

"""Ã©g Ã¡ afmÃ¦li 3. jan
***
"""

p = (1, 3)
v = np.array([1, -1])

vhat = v / np.linalg.norm(v)

dfdv = np.dot(gf(*p), vhat)

print("StefnuafleiÃ°a f Ã­ stefnu p Ã­ punktinum v:", dfdv)

"""TeikniÃ° aÃ° lokum hÃ¦Ã°arlÃ­nur ğ‘“ Ã¡ svÃ¦Ã°inu [0,3]Ã—[0,2].
***
"""

import matplotlib.pyplot as plt
import numpy as np

def f(x, y):
    return x**2*y + 2*x*y**2 - 3*x*y + 4

x = np.linspace(0, 3, 300)
y = np.linspace(0, 2, 300)
X, Y = np.meshgrid(x, y)

Z = f(X, Y)

levels = np.linspace(0, 35, 50)
plt.contour(X, Y, Z, levels=levels, colors='blue')

plt.xlabel('x')
plt.ylabel('y')
plt.title('hÃ¦Ã°arlÃ­nur f Ã¡ svÃ¦Ã°inu [0,3]Ã—[0,2]')

plt.show()